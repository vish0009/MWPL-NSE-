<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSE News Tracker</title>
    <!-- PWA Additions -->
    <meta name="theme-color" content="#1e3a5f">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.svg">

    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@^1.13.0"
  }
}
</script>
</head>
<body>
    <header>
        <h1>NSE News & Events Tracker</h1>
    </header>
    <main>
        <div class="controls">
            <button id="fetch-news-btn" aria-label="Fetch latest news">Get Latest News</button>
        </div>
        <div id="loader" class="loader-container" role="status" aria-live="polite" style="display: none;">
            <div class="loader"></div>
            <p>Fetching latest market news...</p>
        </div>
        <div id="error-message" class="error" role="alert" style="display: none;"></div>
        <section id="news-container" aria-live="polite"></section>
        <section id="performance-container" aria-label="Sector Performance" style="display: none;"></section>
        <section id="mwpl-container" aria-label="Top 10 Stocks by MWPL" style="display: none;"></section>
        <section id="sources-container" aria-label="News Sources" style="display: none;">
            <h2>Sources</h2>
            <ul id="sources-list"></ul>
        </section>
    </main>
    <footer>
        <p>Disclaimer: This information is for informational purposes only and is generated by AI. It should not be considered financial advice.</p>
    </footer>

    <div id="install-banner" style="display: none;">
        <p>Get the native app experience!</p>
        <div class="install-banner-buttons">
            <button id="install-btn">Install</button>
            <button id="dismiss-btn" aria-label="Dismiss install prompt">Later</button>
        </div>
    </div>


    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
    <script type="module" src="index.tsx"></script>
</body>
</html>